(this["webpackJsonpspotify-playlist-plus"]=this["webpackJsonpspotify-playlist-plus"]||[]).push([[0],{112:function(t,e,a){},114:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(29),s=a.n(c),i=(a(83),a(7)),o=a.n(i),u=a(11),l=a(8),h=a(9),p=a(10),j=a(13),d=a(12),b=a(21),f=a(16),y=(a(85),a(86),a(18)),O=a(125),v=a(45),x=a.n(v),k=x.a.create({});function m(){return(m=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.get(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}k.interceptors.response.use((function(t){return t}),(function(t){return console.log(t),Promise.reject(t)}));var g=k,w=function(){function t(){Object(h.a)(this,t)}return Object(p.a)(t,null,[{key:"getPlaylistById",value:function(t){return g.get("".concat("https://api.spotify.com/v1/playlists","/").concat(t))}},{key:"getCurrentUserPlaylists",value:function(){return g.get("https://api.spotify.com/v1/me/playlists")}},{key:"createPlaylist",value:function(t,e){return g.post("https://api.spotify.com/v1/users/".concat(e,"/playlists"),{name:t})}}]),t}(),C="https://api.spotify.com/v1/me",P=function(){function t(){Object(h.a)(this,t)}return Object(p.a)(t,null,[{key:"getRecentTracks",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;if(!e||!a){var n="?limit=".concat(t);return e?n+="&after=".concat(e):a&&(n+="&before=".concat(a)),g.get("".concat(C,"/player/recently-played").concat(n))}console.error("Can't have both after and before specified.")}},{key:"getPlaylists",value:function(){return g.get("".concat(C,"/playlists"))}},{key:"getCurrentUser",value:function(){return g.get(C)}}]),t}(),T=function(){function t(){Object(h.a)(this,t)}return Object(p.a)(t,null,[{key:"getPlaylist",value:function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w.getPlaylistById(e).then((function(t){var e=t.data.tracks.items;return Object(l.a)(Object(l.a)({},t.data),{},{tracks:e})})).catch((function(t){console.error("Failed to get playlist with id: '".concat(e,"'. Error: ").concat(t))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"createPlaylist",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getCurrentUser();case 2:return a=t.sent,t.abrupt("return",w.createPlaylist(e,a.data.id).then((function(t){return t.data})).catch((function(t){console.error("Couldn't create playlist: '".concat(e,"'. Error: ").concat(t))})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),S=a(120);function A(t){if(!(t<=0)){var e=864e5,a=36e5,n=[],r=function(t){return t>1?"s":""},c=Math.floor(t/e);c>0&&n.push("".concat(c," Day").concat(r(c)));var s=t%e,i=Math.floor(s/a);i>0&&n.push("".concat(i%24," Hour").concat(r(i))),s%=a;var o=Math.floor(s/6e4);o>0&&n.push("".concat(o%60," Minute").concat(r(o))),s%=6e4;var u=Math.floor(s/1e3);return 0==n.length&&u>0&&n.push("".concat(u," Second").concat(r(u))),n.join(", ")}}function _(t){if(!(t<=0)){var e=Math.floor(t/1e3),a=Math.floor(e/60),n=Math.floor(a/60),r=[];return n>0&&r.push(n),(a>0||n<1)&&r.push(a%60),e>0&&r.push(e%60),r.map((function(t,e){return 0==e?"".concat(t):t<10?"0".concat(t):"".concat(t)})).join(":")}}var N,I=a(1),R=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return this.props.artists.map((function(t,e,a){return e==a.length-1?Object(I.jsx)(b.b,{to:"/Artist/".concat(t.id),children:t.name},t.id):Object(I.jsxs)("span",{children:[Object(I.jsx)(b.b,{to:"/Artist/".concat(t.id),children:t.name}),",\xa0"]},t.id)}))}}]),a}(r.a.Component),B=a(73);!function(t){t.Play="\u25b6",t.Pause="\u23f8",t.Next="\u23e9",t.Previous="\u23ea"}(N||(N={}));var F="https://api.spotify.com/v1/me/player",M=function(){function t(){Object(h.a)(this,t)}return Object(p.a)(t,null,[{key:"getPlaybackInformation",value:function(){var t=Object(u.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.get(F);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"startResume",value:function(t,e){var a={uris:e};g.put("".concat(F,"/play?device_id=").concat(t),a)}},{key:"pause",value:function(){g.put("".concat(F,"/pause"))}}]),t}();var U=r.a.createContext(void 0),E=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state=Object(l.a)({},t),n.playerButtonClicked=n.playerButtonClicked.bind(Object(y.a)(n)),n}return Object(p.a)(a,[{key:"playerButtonClicked",value:function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.props.currentlyPlaying?M.pause():M.startResume(e._options.id,this.state.uris),this.props.updateCurrentlyPlayingCallback(this.props.index);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return Object(I.jsx)(U.Consumer,{children:function(e){return Object(I.jsx)(B.a,{variant:"outline-dark",onClick:function(){return t.playerButtonClicked(null===e||void 0===e?void 0:e.player)},children:t.props.currentlyPlaying?N.Pause:N.Play})}})}}]),a}(r.a.Component),L=a(119),V=a(78),z=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return Object(I.jsxs)(V.a,{children:[Object(I.jsx)(V.a.Toggle,{variant:"Secondary",children:Object(I.jsx)(L.a,{})}),Object(I.jsx)(V.a.Menu,{children:Object(I.jsx)(V.a.Item,{href:this.props.track.uri,children:"Open in Spotify"})})]})}}]),a}(r.a.Component),D=(a(112),function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var t,e;return Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:Object(I.jsx)(E,{currentlyPlaying:this.props.currentlyPlaying,uris:[this.props.track.uri],updateCurrentlyPlayingCallback:this.props.updateCurrentlyPlayingCallback,index:this.props.index})}),Object(I.jsx)("td",{children:Object(I.jsx)("span",{className:"text-muted",children:this.props.track.track_number})}),Object(I.jsx)("td",{children:this.props.track.name}),Object(I.jsx)("td",{children:Object(I.jsx)(R,{artists:this.props.track.artists})}),Object(I.jsx)("td",{children:null!==(t=null===(e=this.props.track.album)||void 0===e?void 0:e.name)&&void 0!==t?t:"No album"}),Object(I.jsx)("td",{children:_(this.props.track.duration_ms)}),Object(I.jsx)("td",{children:Object(I.jsx)(z,{track:this.props.track})})]})}}]),a}(r.a.Component)),H=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).updateCurrentTrack=function(t){var e=t==n.state.currentlyPlayingTrack?-1:t;n.setState({currentlyPlayingTrack:e})},n.state={currentlyPlayingTrack:-1},n.updateCurrentTrack.bind(Object(y.a)(n)),n}return Object(p.a)(a,[{key:"render",value:function(){var t=this;return this.props.tracks?Object(I.jsxs)(S.a,{hover:!0,children:[Object(I.jsx)("thead",{children:Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{}),Object(I.jsx)("th",{children:"#"}),Object(I.jsx)("th",{children:"Title"}),Object(I.jsx)("th",{children:"Artist(s)"}),Object(I.jsx)("th",{children:"Album"}),Object(I.jsx)("th",{children:"Duration"}),Object(I.jsx)("th",{})]})}),Object(I.jsx)("tbody",{children:this.props.tracks.map((function(e,a){return Object(I.jsx)(D,{track:e,index:a,updateCurrentlyPlayingCallback:t.updateCurrentTrack,currentlyPlaying:t.state.currentlyPlayingTrack==a},"".concat(e.id,"-").concat(a))}))})]}):Object(I.jsx)("p",{children:"Loading tracks"})}}]),a}(r.a.Component),G=a(121),K=a(74),J=a(122),W=a(123),X=function(){function t(){Object(h.a)(this,t)}return Object(p.a)(t,null,[{key:"getAudioFeatures",value:function(){var t=Object(u.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.abrupt("return",g.get("".concat("https://api.spotify.com/v1/audio-features","/?ids=").concat(e.join(","))));case 4:t.prev=4,t.t0=t.catch(0),console.error('Failed to get audio features for tracks with with ids: "'.concat(e,'".')),console.error("Error: ".concat(t.t0));case 8:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e){return t.apply(this,arguments)}}()}]),t}(),q=function(){function t(){Object(h.a)(this,t)}return Object(p.a)(t,null,[{key:"getAudioFeatures",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e.map((function(t){return t.id}))).length>100&&(a=a.slice(0,100)),t.prev=2,t.next=5,X.getAudioFeatures(a);case 5:if(n=t.sent){t.next=8;break}return t.abrupt("return",[]);case 8:return t.abrupt("return",n.data.audio_features);case 11:return t.prev=11,t.t0=t.catch(2),t.abrupt("return",[]);case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},{key:"intensitySort",value:function(){var e=Object(u.a)(o.a.mark((function e(a,n){var r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,e.next=4,t.getAudioFeatures(a);case 4:r=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),console.error("Error getting audio features: ".concat(e.t0)),e.abrupt("return",[]);case 11:return c=r.sort((function(t,e){return t.energy-e.energy})),n&&c.reverse(),s=function(t){var e=t.id;return a.find((function(t){return t.id==e}))},e.abrupt("return",c.map((function(t){return s(t)})).filter((function(t){return!!t})));case 15:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}()}]),t}(),Q=a(124),Y=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state=Object(l.a)({},t),n.playByIntensity=n.playByIntensity.bind(Object(y.a)(n)),n}return Object(p.a)(a,[{key:"playByIntensity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.state.playlist&&this.context.player){var e=this.context.player._options.id,a=this.state.playlist.tracks.map((function(t){return t.track}));q.intensitySort(a,t).then((function(t){var a=t.map((function(t){return t.uri}));M.startResume(e,a)}))}}},{key:"render",value:function(){var t=this;if(!this.props.playlist)return Object(I.jsx)("p",{children:"Loading"});var e=this.props.playlist,a=e.name,n=e.description,r=e.owner,c=e.tracks,s=e.images,i=s.length>0?s[0].url:"https://place-hold.it/250",o=0;c.forEach((function(t){var e=t.track;return o+=e.duration_ms}));var u=0==c.length;return Object(I.jsxs)(G.a,{style:{marginBottom:15},children:[Object(I.jsx)(K.a,{xs:"auto",children:Object(I.jsx)(J.a,{src:i,width:250,height:250,style:{border:"1px solid black"}})}),Object(I.jsxs)(K.a,{children:[Object(I.jsx)("h2",{children:a}),Object(I.jsx)("p",{children:n}),Object(I.jsxs)("p",{children:["Owned by: ",r.display_name]}),Object(I.jsxs)("p",{children:[c.length," Songs. ",A(o)]}),Object(I.jsxs)(V.a,{as:W.a,children:[Object(I.jsx)(B.a,{variant:"info",disabled:!0,children:"Play"}),Object(I.jsx)(V.a.Toggle,{split:!0,variant:"info",children:Object(I.jsx)(Q.a,{})}),Object(I.jsxs)(V.a.Menu,{children:[Object(I.jsx)(V.a.Item,{onClick:function(){return t.playByIntensity()},disabled:u,children:"Play by intensity (increasing)"}),Object(I.jsx)(V.a.Item,{onClick:function(){return t.playByIntensity(!0)},disabled:u,children:"Play by intensity (decreasing)"})]})]})]})]})}}]),a}(r.a.Component);Y.contextType=U;var Z=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return Object(I.jsx)("h3",{children:"No songs in this playlist"})}}]),a}(r.a.Component),$=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(t){var n;Object(h.a)(this,a),(n=e.call(this,t)).state={playlistId:t.match.params.id},n.onSearchSelect=n.onSearchSelect.bind(Object(y.a)(n));var r=t.match.params.id;return n.state={playlistId:r},n.loadPlaylist=n.loadPlaylist.bind(Object(y.a)(n)),n.loadPlaylist(r),n}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(t){if(this.props.location!==t.location){var e=this.props.match.params.id;this.loadPlaylist(e)}}},{key:"loadPlaylist",value:function(t){var e=this;T.getPlaylist(t).then((function(a){a&&e.setState({playlistId:t,playlist:a})}))}},{key:"onSearchSelect",value:function(t){var e=this,a=Object(l.a)(Object(l.a)({},t),{},{tracks:[]});(function(t){return m.apply(this,arguments)})(t.tracks.href).then((function(t){a.tracks=t.data.items,e.setState(Object(l.a)(Object(l.a)({},e.state),{},{playlist:a}))}))}},{key:"render",value:function(){var t;if(!this.state.playlist)return Object(I.jsx)(Z,{});var e=null===(t=this.state.playlist)||void 0===t?void 0:t.tracks.map((function(t){return t.track}));return Object(I.jsxs)(O.a,{fluid:!0,children:[Object(I.jsx)(Y,{playlist:this.state.playlist}),Object(I.jsx)(H,{tracks:e})]})}}]),a}(r.a.Component),tt=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:"Name"}),Object(I.jsx)("img",{src:"https://images-na.ssl-images-amazon.com/images/I/6123EInXGSL._SL1081_.jpg",height:"300px",width:"300px"})]})}}]),a}(r.a.Component);function et(){return Object(I.jsxs)(O.a,{fluid:!0,className:"text-center mt-5",children:[Object(I.jsx)("h2",{children:"Spotify Playlist+"}),Object(I.jsx)(U.Consumer,{children:function(t){var e=void 0;return t&&t.tokenRetriever&&(e=t.tokenRetriever.redirect_url),Object(I.jsx)("a",{href:e,children:Object(I.jsx)(B.a,{variant:"outline-success",disabled:!e,children:"Login"})})}})]})}var at=a(126),nt="https://api.spotify.com/v1/artists",rt=function(){function t(){Object(h.a)(this,t)}return Object(p.a)(t,null,[{key:"getArtistById",value:function(t){try{return g.get("".concat(nt,"/").concat(t))}catch(e){console.error('Failed to get artist with id: "'.concat(t,'". Error: ').concat(e))}}},{key:"getArtistTopTracks",value:function(t){try{return g.get("".concat(nt,"/").concat(t,"/top-tracks?market=US"))}catch(e){console.error('Failed to get top tracks for artist with id: "'.concat(t,". Error: ").concat(e))}}}]),t}(),ct=function(){function t(){Object(h.a)(this,t)}return Object(p.a)(t,null,[{key:"getArtist",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt.getArtistById(e);case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.abrupt("return",a.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getArtistTopTracks",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.id,t.next=3,rt.getArtistTopTracks(a);case 3:if(n=t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.abrupt("return",n.data.tracks);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),st=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={artistId:t.match.params.id},n.loadArtist=n.loadArtist.bind(Object(y.a)(n)),n.loadTopTracks=n.loadTopTracks.bind(Object(y.a)(n)),n.onSearchSelect=n.onSearchSelect.bind(Object(y.a)(n)),n.loadArtist(),n}return Object(p.a)(a,[{key:"loadArtist",value:function(){var t=this;ct.getArtist(this.state.artistId).then((function(e){e&&(t.setState(Object(l.a)(Object(l.a)({},t.state),{},{artist:e})),t.loadTopTracks(e))})).catch((function(t){return console.error(t)}))}},{key:"loadTopTracks",value:function(t){var e=this;ct.getArtistTopTracks(t).then((function(t){t&&e.setState(Object(l.a)(Object(l.a)({},e.state),{},{topTracks:t}))}))}},{key:"onSearchSelect",value:function(t){this.setState(Object(l.a)(Object(l.a)({},this.state),{},{artist:t})),this.loadTopTracks(t)}},{key:"render",value:function(){var t;if(this.state.artist){var e,a,n=this.state.artist,c=n.genres,s=n.images,i=n.name,o=n.popularity,u={sm:s.find((function(t){return 160===t.height})),md:s.find((function(t){return 320===t.height})),lg:s.find((function(t){return 640===t.height}))},l=null!==(e=null!==(a=u.md)&&void 0!==a?a:u.lg)&&void 0!==e?e:u.sm,h=c.map((function(t){return Object(I.jsx)(at.a,{style:{marginRight:5},variant:"secondary",children:t},t)}));t=Object(I.jsxs)("div",{children:[l?Object(I.jsx)(J.a,{src:l.url}):Object(I.jsx)("p",{children:"Loading Image"}),Object(I.jsxs)(G.a,{children:[Object(I.jsx)(K.a,{as:"h2",xs:"auto",children:i}),Object(I.jsx)(K.a,{children:Object(I.jsxs)(V.a,{children:[Object(I.jsx)(V.a.Toggle,{variant:"Secondary",children:Object(I.jsx)(L.a,{})}),Object(I.jsx)(V.a.Menu,{children:Object(I.jsx)(V.a.Item,{href:this.state.artist.uri,children:"Open in Spotify"})})]})})]}),Object(I.jsx)(G.a,{children:Object(I.jsxs)(K.a,{as:"p",children:["Genres: ",h]})}),Object(I.jsx)(G.a,{children:Object(I.jsxs)(K.a,{as:"p",children:[" Popularity: ",o,"th Percentile "]})}),Object(I.jsx)(G.a,{children:Object(I.jsx)(K.a,{as:"h3",children:"Top Tracks"})}),Object(I.jsx)(G.a,{children:Object(I.jsx)(K.a,{children:Object(I.jsx)(H,{tracks:this.state.topTracks})})})]})}else t=Object(I.jsx)(r.a.Fragment,{children:Object(I.jsx)("p",{children:"No Currently Selected Artist. Try searching for one"})});return Object(I.jsx)("div",{children:Object(I.jsx)(O.a,{fluid:!0,children:t})})}}]),a}(r.a.Component),it=a(131),ot=function(){function t(){Object(h.a)(this,t)}return Object(p.a)(t,null,[{key:"getRecentTracks",value:function(){var t=Object(u.a)(o.a.mark((function t(){var e,a,n,r,c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:20,a=c.length>1?c[1]:void 0,n=c.length>2?c[2]:void 0,t.prev=3,t.next=6,P.getRecentTracks(e,a,n);case 6:if(!(r=t.sent)){t.next=9;break}return t.abrupt("return",r.data.items.map((function(t){return t.track})));case 9:return t.abrupt("return",[]);case 12:return t.prev=12,t.t0=t.catch(3),console.error(t.t0),t.abrupt("return",[]);case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(){return t.apply(this,arguments)}}()},{key:"getPlaylists",value:function(){var t=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",P.getPlaylists().then((function(t){return t.data.items})).catch((function(t){console.error("Failed to get users current playlists. Error: ".concat(t))})));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),t}(),ut=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(h.a)(this,a),n=e.call(this,t),ot.getRecentTracks(10).then((function(t){n.setState(Object(l.a)(Object(l.a)({},n.state),{},{recentTracks:t}))})).catch((function(t){console.error(t)})),n.state={recentTracks:[]},n}return Object(p.a)(a,[{key:"render",value:function(){var t=this.state.recentTracks.map((function(t){return Object(I.jsx)(it.a,{className:"p-3 m-3 d-inline-block",children:Object(I.jsxs)(it.a.Body,{children:[Object(I.jsx)(it.a.Title,{children:t.name}),Object(I.jsxs)(it.a.Text,{className:"text-muted",children:["By:\xa0",Object(I.jsx)(R,{artists:t.artists})]})]})},t.id)}));return Object(I.jsxs)(r.a.Fragment,{children:[Object(I.jsx)("h3",{children:"Recently listened to:"}),Object(I.jsx)("div",{className:"w-100",style:{overflowX:"auto"},children:t}),Object(I.jsx)("hr",{})]})}}]),a}(r.a.Component),lt="a7d9f2be243d45f69ad9e83e2ef03b61",ht={redirectUri:"https://jacobhearst.github.io/spotify-playlist-plus"};function pt(t){return jt.apply(this,arguments)}function jt(){return(jt=Object(u.a)(o.a.mark((function t(e){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.post("https://accounts.spotify.com/api/token",null,{params:e,headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var dt=function(){function t(){Object(h.a)(this,t)}return Object(p.a)(t,null,[{key:"createCodeVerifierCookie",value:function(){var t=this.randomString();return document.cookie="code_verifier=".concat(t),t}},{key:"getVerifierCookie",value:function(){var t=document.cookie.split("; ").filter((function(t){return t.startsWith("code_verifier")}));return t.length>0?t[0].split("=")[1]:void 0}},{key:"constructAuthorizationURI",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var a,n,r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.scopes.join(" "),n="".concat("https://accounts.spotify.com/authorize","?client_id=").concat(lt,"&response_type=code&redirect_uri=").concat(ht.redirectUri,"&scope=").concat(encodeURIComponent(a)),t.next=4,this.sha256(e);case 4:return r=t.sent,c=this.base64urlencode(r),n+="&code_challenge_method=S256&code_challenge=".concat(c),t.abrupt("return",n);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"randomString",value:function(){var t="",e=new Uint8Array(43);window.crypto.getRandomValues(e);for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=256/a.length,r=0;r<43;r++)t+=a[Math.floor(Math.abs(e[r])/n)];return t}},{key:"sha256",value:function(t){var e=(new TextEncoder).encode(t);return window.crypto.subtle.digest("SHA-256",e)}},{key:"base64urlencode",value:function(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}},{key:"refreshTimer",value:function(){var t=Object(u.a)(o.a.mark((function t(e,a){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:5e3,n=1e3*e.expires_in,r=n-5e3,setTimeout(Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pt({grant_type:"refresh_token",refresh_token:e.refresh_token,client_id:lt});case 2:(n=t.sent)&&a(n);case 4:case"end":return t.stop()}}),t)}))),r);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},{key:"exchangeCodeForToken",value:function(t,e){return pt({client_id:lt,grant_type:"authorization_code",code:t,redirect_uri:ht.redirectUri,code_verifier:e})}}]),t}();function bt(){return ft.apply(this,arguments)}function ft(){return(ft=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){window.Spotify?t(window.Spotify):window.onSpotifyWebPlaybackSDKReady=function(){t(window.Spotify)}})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yt(t){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(u.a)(o.a.mark((function t(e){var a,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt();case 2:return a=t.sent,n=a.Player,r={name:"SomeTool",getOAuthToken:function(t){t(e.access_token)},volume:.5},t.abrupt("return",new n(r));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}dt.scopes=["user-modify-playback-state","user-read-playback-state","streaming","user-read-email","user-read-private","playlist-read-private","user-read-recently-played","playlist-modify-public"];var vt=a(53),xt=a(77),kt=a(130),mt=a(129),gt=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={playlists:[],newPlaylistName:""},n.createPlaylist=n.createPlaylist.bind(Object(y.a)(n)),ot.getPlaylists().then((function(t){t&&n.setState(Object(l.a)(Object(l.a)({},n.state),{},{playlists:t}))})),n}return Object(p.a)(a,[{key:"createPlaylist",value:function(){var t=this;this.setState({newPlaylistName:""}),T.createPlaylist(this.state.newPlaylistName).then((function(e){if(e){var a=[Object(l.a)(Object(l.a)({},e),{},{tracks:{total:0,href:""},collaborative:!1})].concat(Object(xt.a)(t.state.playlists));t.setState(Object(l.a)(Object(l.a)({},t.state),{},{playlists:a}))}}))}},{key:"render",value:function(){var t=this;return Object(I.jsxs)(r.a.Fragment,{children:[Object(I.jsx)("h2",{children:"Playlists"}),Object(I.jsxs)(kt.a,{children:[Object(I.jsx)(kt.a.Item,{children:Object(I.jsx)(mt.a,{children:Object(I.jsxs)(mt.a.Row,{children:[Object(I.jsx)(K.a,{children:Object(I.jsx)(mt.a.Control,{as:"input",placeholder:"New playlist",onChange:function(e){return t.setState({newPlaylistName:e.target.value})},value:this.state.newPlaylistName})}),Object(I.jsx)(K.a,{sm:"auto",children:Object(I.jsx)(B.a,{variant:"info",onClick:this.createPlaylist,children:"Create"})})]})})}),this.state.playlists.map((function(t){return Object(I.jsx)(b.b,{to:"/spotify-playlist-plus/Playlist/".concat(t.id),children:Object(I.jsx)(kt.a.Item,{children:t.name})},t.id)}))]})]})}}]),a}(r.a.Component);function wt(){var t="/spotify-playlist-plus";return Object(I.jsxs)("div",{className:"float-right",children:[Object(I.jsx)(b.b,{className:"p-2",to:t,children:Object(I.jsx)(B.a,{size:"sm",variant:"outline-primary",children:"Home"})}),Object(I.jsx)(b.b,{className:"p-2",to:t+"/Album",children:Object(I.jsx)(B.a,{size:"sm",variant:"outline-primary",children:"Album Page"})})]})}var Ct=a(127),Pt=a(75),Tt=a(128),St=a(76),At=function(){function t(){Object(h.a)(this,t)}return Object(p.a)(t,null,[{key:"GetSearchResults",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var a,n,r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://api.spotify.com/v1/search?"+e,n=[],t.prev=2,t.next=5,g.get(a);case 5:for(c in(r=t.sent).data)r.data[c]&&(n=n.concat(r.data[c].items));t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log("Cound't retrieve search results");case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}]),t}();var _t=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(t){var n,r,c,s,i;return Object(h.a)(this,a),(i=e.call(this,t)).state={searchVal:"",showModal:!1,types:{artist:null!==(n=t.artist)&&void 0!==n&&n,playlist:null!==(r=t.playlist)&&void 0!==r&&r,track:null!==(c=t.track)&&void 0!==c&&c,album:null!==(s=t.album)&&void 0!==s&&s}},i.search=i.search.bind(Object(y.a)(i)),i}return Object(p.a)(a,[{key:"search",value:function(t){var e=this;if("Enter"===t.key){var a=Object.keys(this.state.types).filter((function(t){return e.state.types[t]})),n=t.target.defaultValue;At.GetSearchResults(function(t,e){var a="q=".concat(t);return e.length>0&&(a+="&type="+e.join(",")),a}(n,a)).then((function(t){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{items:t,showModal:!0}))}))}}},{key:"render",value:function(){var t,e=this,a=null===(t=this.state.items)||void 0===t?void 0:t.map((function(t,a){var n=function(t){return t.album_type?"Album":t.genres?"Artist":t.tracks?"Playlist":t.track_number?"Track":"FuNcTiOn lAcKs EnDiENg ReTuRn sTaTeMeNt"}(t);return Object(I.jsx)("li",{children:Object(I.jsx)(b.b,{className:"p-2",to:"".concat("/spotify-playlist-plus","/").concat(n,"/").concat(t.id),children:Object(I.jsx)(B.a,{className:"searchResultButton",onClick:function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showModal:!1,searchVal:""}))},children:"".concat(n,": ").concat(t.name)})})},a)}));return Object(I.jsxs)("div",{children:[Object(I.jsxs)(Ct.a,{children:[Object(I.jsxs)(St.a,{title:"Filter",className:"filter-dropdown",children:[Object(I.jsx)(V.a.Divider,{}),Object(I.jsx)(mt.a.Check,{inline:!0,disabled:!this.props.album,checked:this.state.types.album,label:"Album",onChange:function(){e.setState({types:Object(l.a)(Object(l.a)({},e.state.types),{},{album:!e.state.types.album})})}}),Object(I.jsx)(mt.a.Check,{inline:!0,disabled:!this.props.artist,checked:this.state.types.artist,label:"Artist",onChange:function(){e.setState({types:Object(l.a)(Object(l.a)({},e.state.types),{},{artist:!e.state.types.artist})})}}),Object(I.jsx)(mt.a.Check,{inline:!0,disabled:!this.props.playlist,checked:this.state.types.playlist,label:"Playlist",onChange:function(){e.setState({types:Object(l.a)(Object(l.a)({},e.state.types),{},{playlist:!e.state.types.playlist})})}}),Object(I.jsx)(mt.a.Check,{inline:!0,disabled:!this.props.track,checked:this.state.types.track,label:"Track",onChange:function(){e.setState({types:Object(l.a)(Object(l.a)({},e.state.types),{},{track:!e.state.types.track})})}})]}),Object(I.jsx)(Pt.a,{as:"input",placeholder:"Search",value:this.state.searchVal,onKeyDown:this.search,onChange:function(t){return e.setState(Object(l.a)(Object(l.a)({},e.state),{},{searchVal:t.target.value}))}})]}),Object(I.jsxs)(Tt.a,{show:this.state.showModal,onHide:function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showModal:!1}))},children:[Object(I.jsx)(Tt.a.Header,{children:Object(I.jsx)(Tt.a.Title,{children:"Search Results"})}),Object(I.jsx)(Tt.a.Body,{children:Object(I.jsx)("ul",{children:a})}),Object(I.jsx)(Tt.a.Footer,{children:Object(I.jsx)(B.a,{onClick:function(){e.setState(Object(l.a)(Object(l.a)({},e.state),{},{showModal:!1}))},children:"Close"})})]})]})}}]),a}(r.a.Component),Nt=function(t){Object(j.a)(a,t);var e=Object(d.a)(a);function a(t){var n,r;Object(h.a)(this,a),r=e.call(this,t);var c=null!==(n=dt.getVerifierCookie())&&void 0!==n?n:dt.createCodeVerifierCookie(),s=new URLSearchParams(window.location.search).get("code");return s?dt.exchangeCodeForToken(s,c).then((function(t){var e;t&&((e=t)&&(k.defaults.headers.common.Authorization="Bearer "+e.access_token),r.refreshTokenCallback(t))})):r.getAuthURL(c),r.state={logOut:function(){r.getAuthURL(c),r.setState(Object(l.a)(Object(l.a)({},r.state),{},{authToken:void 0}))}},r}return Object(p.a)(a,[{key:"getAuthURL",value:function(t){var e=this;dt.constructAuthorizationURI(t).then((function(a){var n={redirect_url:a,verifier:t};e.setState(Object(l.a)(Object(l.a)({},e.state),{},{tokenRetriever:n}))}))}},{key:"render",value:function(){var t="/spotify-playlist-plus";return this.state.authToken?Object(I.jsx)(U.Provider,{value:this.state,children:Object(I.jsx)(b.a,{children:Object(I.jsx)(O.a,{fluid:!0,className:"h-100",children:Object(I.jsxs)("div",{className:"h-100 d-flex flex-column",children:[Object(I.jsxs)(G.a,{id:"navbar",children:[Object(I.jsx)(K.a,{children:Object(I.jsx)("b",{children:"Spotify Playlist+"})}),Object(I.jsx)(K.a,{children:Object(I.jsx)(_t,{artist:!0,playlist:!0,track:!0,album:!0})}),Object(I.jsxs)(K.a,{children:[Object(I.jsx)(wt,{}),Object(I.jsx)(B.a,{size:"sm",variant:"info",onClick:this.state.logOut,className:"float-right",children:"Log out"})]})]}),Object(I.jsxs)(G.a,{className:"flex-grow-1",children:[Object(I.jsx)(K.a,{md:"3",className:"no-float pt-3",id:"left-content-container",children:Object(I.jsx)(gt,{})}),Object(I.jsx)(K.a,{md:"9",className:"no-float pt-3",children:Object(I.jsxs)(vt.a,{children:[Object(I.jsx)(f.a,{exact:!0,path:t,component:ut}),Object(I.jsx)(f.a,{exact:!0,path:t+"/Album",component:tt}),Object(I.jsx)(f.a,{path:t+"/Artist/:id",component:st}),Object(I.jsx)(f.a,{path:t+"/Playlist/:id",component:$})]})})]})]})})})}):Object(I.jsx)(U.Provider,{value:this.state,children:Object(I.jsx)(et,{})})}},{key:"refreshTokenCallback",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var a,n=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yt(e);case 2:(a=t.sent).connect().catch((function(t){console.error("Error connecting player:",t)})),a.on("ready",(function(t){var e=n.state.player;e._options.id=t.device_id,n.setState(Object(l.a)(Object(l.a)({},n.state),{},{player:e}))})),this.setState(Object(l.a)(Object(l.a)({},this.state),{},{authToken:e,player:a})),dt.refreshTimer(e,this.refreshTokenCallback);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),a}(r.a.Component),It=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,132)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,s=e.getTTFB;a(t),n(t),r(t),c(t),s(t)}))};s.a.render(Object(I.jsx)(b.a,{children:Object(I.jsx)(Nt,{})}),document.getElementById("root")),It()},83:function(t,e,a){},85:function(t,e,a){}},[[114,1,2]]]);
//# sourceMappingURL=main.e0da48c2.chunk.js.map