(this["webpackJsonpspotify-playlist-plus"]=this["webpackJsonpspotify-playlist-plus"]||[]).push([[0],{42:function(t,e,n){},43:function(t,e,n){},70:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(35),i=n.n(c),s=(n(42),n(9)),o=n(3),u=n(4),l=n(8),j=n(7),h=n(6),b=(n(43),n(44),n(19)),d=n(75),p=n(18),O=n.n(p),f=n(21),y=n(36),x=n.n(y).a.create({});x.interceptors.response.use((function(t){return t}),(function(t){return console.log(t),Promise.reject(t)}));var v=x,k=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,null,[{key:"getPlaylistById",value:function(t){try{return v.get("".concat("https://api.spotify.com/v1/playlists","/").concat(t))}catch(e){console.error('Failed to get playlist with id: "'.concat(t,'". Error: ').concat(e))}}}]),t}(),g=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,null,[{key:"getPlaylist",value:function(){var t=Object(f.a)(O.a.mark((function t(e){var n,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getPlaylistById(e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:return a=n.data.tracks.items,t.abrupt("return",Object(s.a)(Object(s.a)({},n.data),{},{tracks:a}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),m=n(17),P=n(1);function T(){var t="/spotify-playlist-plus";return Object(P.jsxs)("div",{children:[Object(P.jsx)(m.b,{to:t,children:"Home "}),Object(P.jsx)(m.b,{to:t+"/AlbumPage",children:"Album Page "}),Object(P.jsx)(m.b,{to:t+"/artist/4V8LLVI7PbaPR0K2TGSxFF",children:"Artist Page"}),Object(P.jsx)(m.b,{to:t+"/playlist/37i9dQZF1DZ06evO2QRN3G",children:"Playlist Page "})]})}var w=n(71);function A(t){var e=Math.floor(t/1e3),n=Math.floor(e/60),a=Math.floor(n/60),r=Math.floor(a/24),c=[];return r>0&&c.push("".concat(r," Days")),a>0&&c.push("".concat(a%24," Hours")),n>0&&c.push("".concat(n%60," Minutes")),0==c.length&&c.push("".concat(e," Seconds")),c.join(", ")}function C(t){var e=Math.floor(t/1e3),n=Math.floor(e/60),a=Math.floor(n/60),r=[];return a>0&&r.push(a),n>0&&r.push(n%60),e>0&&r.push(e%60),r.map((function(t,e){return t%10==0?"".concat(t,"0"):0==e?"".concat(t):t<10?"0".concat(t):"".concat(t)})).join(":")}var L,I=n(77);!function(t){t.Play="#9654",t.Pause="#9208",t.Next="#5861",t.Previous="#5862"}(L||(L={}));var S="https://api.spotify.com/v1/me/player";var F=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state=Object(s.a)({},t),a}return Object(u.a)(n,[{key:"playerButtonClicked",value:function(){this.state.currentlyPlaying?v.put("".concat(S,"/pause")):v.put("".concat(S,"/play")),this.setState({currentlyPlaying:!this.state.currentlyPlaying})}},{key:"render",value:function(){return Object(P.jsxs)(I.a,{variant:"outline-dark",onClick:this.playerButtonClicked,children:["&",this.props.currentlyPlaying?L.Pause:L.Play]})}}]),n}(r.a.Component),_=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={track:t.track},a}return Object(u.a)(n,[{key:"render",value:function(){var t,e,n=this.state.track.artists.map((function(t){return t.name})).join(", ");return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:Object(P.jsx)(F,{currentlyPlaying:!1,children:"&#21E8"})}),Object(P.jsx)("td",{children:this.state.track.name}),Object(P.jsx)("td",{children:n}),Object(P.jsx)("td",{children:null!==(t=null===(e=this.state.track.album)||void 0===e?void 0:e.name)&&void 0!==t?t:"No album"}),Object(P.jsx)("td",{children:C(this.state.track.duration_ms)})]})}}]),n}(r.a.Component),B=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={tracks:t.tracks},a}return Object(u.a)(n,[{key:"render",value:function(){return this.state.tracks?Object(P.jsxs)(w.a,{hover:!0,children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{}),Object(P.jsx)("th",{children:"Title"}),Object(P.jsx)("th",{children:"Artist(s)"}),Object(P.jsx)("th",{children:"Album"}),Object(P.jsx)("th",{children:"Duration"})]})}),Object(P.jsx)("tbody",{children:this.state.tracks.map((function(t){return Object(P.jsx)(_,{track:t},t.id)}))})]}):Object(P.jsx)("p",{children:"Loading tracks"})}}]),n}(r.a.Component),M=n(72),W=n(73),E=n(74),N=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state=Object(s.a)({},t),a}return Object(u.a)(n,[{key:"render",value:function(){if(!this.state.playlist)return Object(P.jsx)("p",{children:"Loading"});var t=this.state.playlist,e=t.name,n=t.description,a=t.owner,r=t.tracks,c=r.map((function(t){return t.track.duration_ms})).reduce((function(t,e){return t+e}));return Object(P.jsxs)(M.a,{style:{marginBottom:15},children:[Object(P.jsx)(W.a,{xs:"auto",children:Object(P.jsx)(E.a,{src:this.state.playlist.images[0].url,width:250,height:250,style:{border:"1px solid black"}})}),Object(P.jsxs)(W.a,{children:[Object(P.jsx)("h2",{children:e}),Object(P.jsx)("p",{children:n}),Object(P.jsxs)("p",{children:["Owned by: ",a.display_name]}),Object(P.jsxs)("p",{children:[r.length," Songs. ",A(c)]})]})]})}}]),n}(r.a.Component),H=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(P.jsx)("h3",{children:"No songs in this playlist"})}}]),n}(r.a.Component),R=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={playlistId:t.match.params.id},a.loadPlaylist=a.loadPlaylist.bind(Object(b.a)(a)),a.loadPlaylist(),a}return Object(u.a)(n,[{key:"loadPlaylist",value:function(){var t=this;console.log("Loading playlist"),g.getPlaylist(this.state.playlistId).then((function(e){e&&t.setState(Object(s.a)(Object(s.a)({},t.state),{},{playlist:e}))}))}},{key:"render",value:function(){if(!this.state.playlist)return Object(P.jsx)(H,{});var t=this.state.playlist.tracks.map((function(t){return t.track}));return Object(P.jsxs)(d.a,{fluid:!0,children:[Object(P.jsx)(T,{}),Object(P.jsx)(N,{playlist:this.state.playlist}),Object(P.jsx)(B,{tracks:t})]})}}]),n}(r.a.Component),U=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(P.jsxs)("div",{children:[Object(P.jsx)(T,{}),Object(P.jsx)("h1",{children:"Name"}),Object(P.jsx)("img",{src:"https://images-na.ssl-images-amazon.com/images/I/6123EInXGSL._SL1081_.jpg",height:"300px",width:"300px"})]})}}]),n}(r.a.Component),z=function(){function t(e,n,a){Object(o.a)(this,t),this.currentToken=void 0,this.token_type=void 0,this.expires_in=void 0,this.currentToken=e,this.token_type=n,this.expires_in=a,this.startWatching()}return Object(u.a)(t,[{key:"startWatching",value:function(){console.log("Watching token")}}]),t}(),D=r.a.createContext(void 0),G=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsx)("p",{children:"Home page"}),Object(P.jsx)(T,{}),Object(P.jsx)("button",{onClick:this.context.logOut,children:"Log out"})]})}}]),n}(r.a.Component);G.contextType=D;var V=n(76),J="https://api.spotify.com/v1/artists",Q=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,null,[{key:"getArtistById",value:function(t){try{return v.get("".concat(J,"/").concat(t))}catch(e){console.error('Failed to get artist with id: "'.concat(t,'". Error: ').concat(e))}}},{key:"getArtistTopTracks",value:function(t){try{return v.get("".concat(J,"/").concat(t,"/top-tracks?market=US"))}catch(e){console.error('Failed to get top tracks for artist with id: "'.concat(t,". Error: ").concat(e))}}}]),t}(),Z=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,null,[{key:"getArtist",value:function(){var t=Object(f.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q.getArtistById(e);case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.abrupt("return",n.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getArtistTopTracks",value:function(){var t=Object(f.a)(O.a.mark((function t(e){var n,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,t.next=3,Q.getArtistTopTracks(n);case 3:if(a=t.sent){t.next=6;break}return t.abrupt("return");case 6:return t.abrupt("return",a.data.tracks);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),K=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={artistId:t.match.params.id},a.loadArtist=a.loadArtist.bind(Object(b.a)(a)),a.loadTopTracks=a.loadTopTracks.bind(Object(b.a)(a)),a.loadArtist(),a}return Object(u.a)(n,[{key:"loadArtist",value:function(){var t=this;Z.getArtist(this.state.artistId).then((function(e){e&&(t.setState(Object(s.a)(Object(s.a)({},t.state),{},{artist:e})),t.loadTopTracks(e))})).catch((function(t){return console.error(t)}))}},{key:"loadTopTracks",value:function(t){var e=this;Z.getArtistTopTracks(t).then((function(t){t&&e.setState(Object(s.a)(Object(s.a)({},e.state),{},{topTracks:t}))}))}},{key:"render",value:function(){var t,e;if(!this.state.artist)return Object(P.jsxs)(r.a.Fragment,{children:[Object(P.jsx)(T,{}),Object(P.jsx)("p",{children:"Loading Artist"})]});var n=this.state.artist,a=n.genres,c=n.images,i=n.name,s=n.popularity,o={sm:c.find((function(t){return 160===t.height})),md:c.find((function(t){return 320===t.height})),lg:c.find((function(t){return 640===t.height}))},u=null!==(t=null!==(e=o.md)&&void 0!==e?e:o.lg)&&void 0!==t?t:o.sm,l=a.map((function(t){return Object(P.jsx)(V.a,{style:{marginRight:5},variant:"secondary",children:t},t)}));return Object(P.jsxs)(d.a,{fluid:!0,children:[Object(P.jsx)(T,{}),u?Object(P.jsx)(E.a,{src:u.url}):Object(P.jsx)("p",{children:"Loading Image"}),Object(P.jsx)(M.a,{children:Object(P.jsx)(W.a,{as:"h2",children:i})}),Object(P.jsx)(M.a,{children:Object(P.jsxs)(W.a,{as:"p",children:["Genres: ",l]})}),Object(P.jsx)(M.a,{children:Object(P.jsxs)(W.a,{as:"p",children:[" Popularity: ",s,"th Percentile "]})}),Object(P.jsx)(M.a,{children:Object(P.jsx)(W.a,{as:"h3",children:"Top Tracks"})}),Object(P.jsx)(M.a,{children:Object(P.jsx)(W.a,{children:Object(P.jsx)(B,{tracks:this.state.topTracks})})})]})}}]),n}(r.a.Component),X={redirectUri:"https://jacobhearst.github.io/spotify-playlist-plus"};function q(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("h2",{children:"Spotify Playlist Plus"}),Object(P.jsx)("a",{href:"https://accounts.spotify.com/authorize?client_id=a7d9f2be243d45f69ad9e83e2ef03b61&response_type=token&redirect_uri="+X.redirectUri,children:Object(P.jsx)("button",{children:"Spotify Login"})})]})}var Y=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(t){var a;Object(o.a)(this,n);var r,c={logOut:function(){a.setState(Object(s.a)(Object(s.a)({},a.state),{},{tokenWatcher:void 0}))}},i=(a=e.call(this,t)).getURLHashValues(window.location.hash);return i&&i.length>0&&(c.tokenWatcher=new z(i[0],i[1],Number(i[2])),(r=c).tokenWatcher?x.defaults.headers.common.Authorization="Bearer "+r.tokenWatcher.currentToken:console.warn("Can't initialize axios without a token watcher")),a.state=c,a}return Object(u.a)(n,[{key:"getURLHashValues",value:function(t){var e=t.slice(1,t.length).split("&").map((function(t){return t.split("=")[1]}));if(e.length>0&&e.every((function(t){return!!t})))return e}},{key:"render",value:function(){var t="/spotify-playlist-plus",e=Object(P.jsx)(q,{});return this.state.tokenWatcher&&(e=Object(P.jsx)(G,{})),Object(P.jsx)("main",{children:Object(P.jsx)(D.Provider,{value:this.state,children:Object(P.jsxs)(h.c,{children:[Object(P.jsx)(h.a,{exact:!0,path:t,children:e}),Object(P.jsx)(h.a,{exact:!0,path:t+"/AlbumPage",component:U}),Object(P.jsx)(h.a,{exact:!0,path:t+"/artist/:id",component:K}),Object(P.jsx)(h.a,{exact:!0,path:t+"/playlist/:id",component:R})]})})})}}]),n}(r.a.Component),$=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))};i.a.render(Object(P.jsx)(m.a,{children:Object(P.jsx)(Y,{})}),document.getElementById("root")),$()}},[[70,1,2]]]);
//# sourceMappingURL=main.274ff136.chunk.js.map